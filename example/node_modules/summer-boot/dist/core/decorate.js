"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Schedule=exports.ErrorHandler=exports.Interceptor=exports.Autowrite=exports.Component=exports.Service=exports.Body=exports.Query=exports.Res=exports.Req=exports.PathVariable=exports.Patch=exports.Put=exports.Delete=exports.Post=exports.Get=exports.RequestMapping=exports.Controller=exports.RequestMethod=exports.MetaKey=void 0,require("reflect-metadata");var MetaKey,RequestMethod,Path2Regexp=require("path-to-regexp");function defineComponent(e){Reflect.defineMetadata(MetaKey.COMPONENT,{},e)}function Controller(t){return void 0===t&&(t={}),t.path=t.path||"/",function(e){Reflect.defineMetadata(MetaKey.CONTROLLER,t,e)}}function RequestMapping(e){var n={method:RequestMethod.GET,path:""};return"string"==typeof e?n.path=e:(n.path=e.path,n.method=e.method||RequestMethod.GET),function(e,t,o){Reflect.defineMetadata(MetaKey.METHOD,n,e[t])}}function Get(e){var n={method:RequestMethod.GET,path:e};return function(e,t,o){Reflect.defineMetadata(MetaKey.METHOD,n,e[t])}}function Post(e){var n={method:RequestMethod.POST,path:e};return function(e,t,o){Reflect.defineMetadata(MetaKey.METHOD,n,e[t])}}function Delete(e){var n={method:RequestMethod.DELETE,path:e};return function(e,t,o){Reflect.defineMetadata(MetaKey.METHOD,n,e[t])}}function Put(e){var n={method:RequestMethod.PUT,path:e};return function(e,t,o){Reflect.defineMetadata(MetaKey.METHOD,n,e[t])}}function Patch(e){var n={method:RequestMethod.PATCH,path:e};return function(e,t,o){Reflect.defineMetadata(MetaKey.METHOD,n,e[t])}}function PathVariable(r){return function(e,t,o){var n=Reflect.getMetadata(MetaKey.METHOD_PARAM,e[t]),o=[{index:o,key:r}];n&&Array.isArray(n)&&(o=o.concat(n)),Reflect.defineMetadata(MetaKey.METHOD_PARAM,o,e[t])}}function Req(e,t,o){Reflect.defineMetadata(MetaKey.REQUEST,{index:o},e[t])}function Res(e,t,o){Reflect.defineMetadata(MetaKey.RESPONSE,{index:o},e[t])}function Query(e,t,o){Reflect.defineMetadata(MetaKey.QUERY,{index:o},e[t])}function Body(e,t,o){Reflect.defineMetadata(MetaKey.BODY,{index:o},e[t])}function Service(){return function(e){defineComponent(e)}}function Component(){return function(e){defineComponent(e)}}function Autowrite(o){return function(e,t){e[t]=null,Reflect.defineMetadata(MetaKey.INJECT,{target:e,name:o||t},e,t)}}function Interceptor(t){return function(e){Reflect.defineMetadata(MetaKey.INTERCEPTOR_HANDLER,{rules:t?Path2Regexp.pathToRegexp(t):null,type:MetaKey.INTERCEPTOR_HANDLER},e)}}function ErrorHandler(){return function(e){Reflect.defineMetadata(MetaKey.ERROR_HANDLER,{rules:void 0,type:MetaKey.ERROR_HANDLER},e)}}function Schedule(t){return function(e){Reflect.defineMetadata(MetaKey.SCHEDULE,{rule:t,type:MetaKey.SCHEDULE},e),defineComponent(e)}}!function(e){e.CONTROLLER="CONTROLLER",e.METHOD="METHOD",e.METHOD_PARAM="METHOD_PARAM",e.REQUEST="REQUEST",e.RESPONSE="RESPONSE",e.QUERY="QUERY",e.BODY="BODY",e.INJECT="INJECT",e.COMPONENT="COMPONENT",e.INTERCEPTOR_HANDLER="INTERCEPTOR_HANDLER",e.ERROR_HANDLER="ERROR_HANDLER",e.SCHEDULE="SCHEDULE"}(MetaKey=exports.MetaKey||(exports.MetaKey={})),function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE",e.PATCH="PATCH",e.OPTION="OPTION"}(RequestMethod=exports.RequestMethod||(exports.RequestMethod={})),exports.Controller=Controller,exports.RequestMapping=RequestMapping,exports.Get=Get,exports.Post=Post,exports.Delete=Delete,exports.Put=Put,exports.Patch=Patch,exports.PathVariable=PathVariable,exports.Req=Req,exports.Res=Res,exports.Query=Query,exports.Body=Body,exports.Service=Service,exports.Component=Component,exports.Autowrite=Autowrite,exports.Interceptor=Interceptor,exports.ErrorHandler=ErrorHandler,exports.Schedule=Schedule;